:root {
  /* User-provided palette */
  --falu-red: #6f1d1b;   /* primary accent (deep red) */
  --lion: #bb9457;       /* gold accent */
  --bistre: #432818;     /* dark background */
  --brown: #99582a;      /* secondary accent */
  --peach: #ffe6a7;      /* light highlight */

  /* Map palette to semantic tokens (default: dark theme) */
  --bg: var(--bistre);
  --bg-accent: radial-gradient(900px 520px at 12% 0%, #4b2a1b 0%, var(--bistre) 55%),
               radial-gradient(800px 600px at 88% -10%, #2e190f 0%, var(--bistre) 60%);
  --card: #2d1a10;        /* dark card based on bistre */
  --text: #f7f3ea;        /* near-ivory for contrast on dark */
  --muted: #d2c6b6;       /* muted text (peach-tinted) */
  --border: #5a3621;      /* warm border */

  --accent: var(--lion);      /* primary action color */
  --accent-2: var(--brown);   /* secondary action */
  --danger: var(--falu-red);
  --warn: var(--peach);
}

/* Light theme overrides (brown palette default) */
[data-theme="light"][data-palette="brown"],
[data-theme="light"]:not([data-palette]) {
  --bg: #fffdf7;                    /* off-white base */
  --bg-accent: radial-gradient(900px 520px at 10% -10%, #fff6d8 0%, #fffdf7 60%),
               radial-gradient(900px 520px at 90% -20%, #ffeec0 0%, transparent 60%);
  --card: #fff7df;                  /* soft peach card */
  --text: #2b1b10;                  /* dark cocoa */
  --muted: #5e4028;                 /* warm muted */
  --border: #e6cf9d;                /* light warm border */

  --accent: var(--brown);           /* buttons: brown */
  --accent-2: var(--lion);          /* secondary: lion */
  --danger: var(--falu-red);
  --warn: var(--peach);
}

/* Palette variants by data-palette */
/* Default palette is already defined via root variables (brown/peach) */

/* Ocean: teal/blue */
[data-palette="ocean"] {
  --falu-red: #0f766e;   /* deep teal accent */
  --lion: #38bdf8;       /* sky blue */
  --bistre: #0b1220;     /* deep navy */
  --brown: #1e3a8a;      /* indigo secondary */
  --peach: #c7f9ff;      /* ice */

  --bg: var(--bistre);
  --bg-accent: radial-gradient(900px 520px at 12% 0%, #0c1b36 0%, var(--bistre) 55%),
               radial-gradient(800px 600px at 88% -10%, #051427 0%, var(--bistre) 60%);
  --card: #0f1b34;
  --text: #e7f6ff;
  --muted: #a5c5de;
  --border: #173053;
  --accent: var(--lion);
  --accent-2: var(--falu-red);
  --danger: #ef4444;
  --warn: #fde68a;
}

/* Ocean light */
[data-theme="light"][data-palette="ocean"] {
  --bg: #f3fbff; /* very light blue */
  --bg-accent: radial-gradient(900px 520px at 10% -10%, #e6f6ff 0%, #f3fbff 60%),
               radial-gradient(900px 520px at 90% -20%, #e0f2fe 0%, transparent 60%);
  --card: #e8f4ff;
  --text: #0b1220;
  --muted: #204a6a;
  --border: #c6e3f7;
  --accent: #1fa2e6; /* brighter ocean button */
  --accent-2: #0f766e;
}

/* Forest: green/earth */
[data-palette="forest"] {
  --falu-red: #166534;   /* deep green accent */
  --lion: #84cc16;       /* lime */
  --bistre: #0b1110;     /* evergreen night */
  --brown: #3f6212;      /* olive */
  --peach: #eaffc7;      /* pale moss */

  --bg: var(--bistre);
  --bg-accent: radial-gradient(900px 520px at 8% -10%, #112018 0%, var(--bistre) 55%),
               radial-gradient(900px 520px at 92% -20%, #0a160f 0%, var(--bistre) 60%);
  --card: #0f1a14;
  --text: #eaf7ef;
  --muted: #b7d2bf;
  --border: #163a26;
  --accent: var(--lion);
  --accent-2: var(--falu-red);
  --danger: #dc2626;
  --warn: #fde68a;
}

/* Forest light */
[data-theme="light"][data-palette="forest"] {
  --bg: #f4fff6; /* misty leaf */
  --bg-accent: radial-gradient(900px 520px at 10% -10%, #ebffe9 0%, #f4fff6 60%),
               radial-gradient(900px 520px at 90% -20%, #e7ffe6 0%, transparent 60%);
  --card: #eaf7ef;
  --text: #102018;
  --muted: #274a36;
  --border: #cde8d7;
  --accent: #4caf50; /* fresh leaf button */
  --accent-2: #166534;
}

* { box-sizing: border-box; }
html, body { height: 100%; }
body {
  margin: 0; padding: 0;
  font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Inter, Ubuntu;
  color: var(--text);
  background: var(--bg);
  background-image: var(--bg-accent);
}

:where(button, input, table, .card, select.palette-select) { transition: all 160ms ease; }

header {
  display:flex; justify-content:space-between; align-items:center;
  padding:16px 20px; border-bottom: 1px solid var(--border);
  background: linear-gradient(0deg, color-mix(in oklab, var(--card), transparent 55%), color-mix(in oklab, var(--card), transparent 55%));
  backdrop-filter: saturate(115%) blur(5px);
  position: sticky; top: 0; z-index: 10;
}

h1 { margin:0; font-size:20px; letter-spacing:0.3px; }

#api-base input {
  width: 260px; padding: 8px 10px; border-radius: 8px;
  background: color-mix(in oklab, var(--card), #0000 35%);
  border:1px solid var(--border); color: var(--text);
  outline: none;
}
#api-base input:focus { border-color: var(--accent); box-shadow: 0 0 0 3px color-mix(in oklab, var(--accent), #0000 75%); }
#api-base button {
  margin-left: 8px; padding: 8px 12px; background: var(--accent); color: color-mix(in oklab, var(--text), #000 75%);
  border:0; border-radius:8px; cursor:pointer; font-weight:700;
}
#api-base button:hover { filter: brightness(1.05); transform: translateY(-1px); }

/* Theme toggle button variant */
.theme-btn { background: var(--accent-2) !important; color: color-mix(in oklab, var(--text), #000 75%) !important; }
.theme-btn:hover { filter: brightness(1.06); }

/* Aesthetic palette dropdown */
.palette-select {
  -webkit-appearance: none; appearance: none;
  padding: 8px 36px 8px 12px; margin-left: 8px;
  border-radius: 8px; border: 1px solid var(--border);
  background: color-mix(in oklab, var(--card), #0000 35%);
  color: var(--text); font-weight: 600; cursor: pointer;
  background-image: linear-gradient(45deg, transparent 50%, color-mix(in oklab, var(--text), #000 25%) 50%),
                    linear-gradient(135deg, color-mix(in oklab, var(--text), #000 25%) 50%, transparent 50%);
  background-position: right 12px top 16px, right 6px top 16px;
  background-size: 8px 8px, 8px 8px;
  background-repeat: no-repeat;
}
.palette-select:hover { filter: brightness(1.06); }
.palette-select:focus { outline: none; border-color: var(--accent); box-shadow: 0 0 0 3px color-mix(in oklab, var(--accent), #0000 75%); }

main {
  max-width: 1100px; margin: 22px auto; padding: 0 16px;
  display:grid; gap:16px; grid-template-columns: 1fr; }

.card {
  background: linear-gradient(180deg, color-mix(in oklab, var(--card), #0000 10%), color-mix(in oklab, var(--card), #0000 0%));
  border: 1px solid var(--border);
  border-radius:14px; padding:16px;
  box-shadow: 0 8px 24px color-mix(in oklab, #000, #0000 65%), inset 0 1px 0 rgba(255,255,255,0.03);
}

h2 { margin: 0 0 10px; font-size: 18px; font-weight: 800; color: var(--peach); }
[data-theme="light"] h2 { color: #5e4028; }

.row, .row-inline { display:flex; gap:10px; margin-bottom:10px; align-items:center; flex-wrap: wrap; }
.row label { width: 120px; color: var(--muted); }
.row input, .row-inline input {
  flex: 1; min-width: 180px; padding: 10px 12px; background: color-mix(in oklab, var(--card), #0000 35%);
  border:1px solid var(--border); color:var(--text); border-radius:10px; outline: none;
}
.row input:focus, .row-inline input:focus { border-color: var(--accent-2); box-shadow: 0 0 0 3px color-mix(in oklab, var(--accent-2), #0000 75%); }

button {
  padding: 10px 14px; background: linear-gradient(180deg, var(--accent), color-mix(in oklab, var(--accent), #000 18%));
  color: color-mix(in oklab, var(--text), #000 75%); font-weight:800; border:0; border-radius:10px; cursor:pointer;
  box-shadow: 0 6px 16px color-mix(in oklab, var(--accent), #0000 75%);
}
button:hover { filter: brightness(1.06); transform: translateY(-1px); }
button:active { transform: translateY(0); filter: brightness(0.98); }

.token { margin-top: 8px; color: var(--muted); word-break: break-all; }

/* Table styles */
#contactsTable { width:100%; border-collapse: separate; border-spacing:0; margin-top: 10px; overflow: hidden; border-radius: 10px;
  box-shadow: inset 0 0 0 1px var(--border);
}
#contactsTable thead th {
  color: color-mix(in oklab, var(--text), #000 20%); background: color-mix(in oklab, var(--card), #0000 10%);
  text-align:left; padding: 10px 12px; border-bottom: 1px solid var(--border);
}
#contactsTable tbody td { padding: 10px 12px; border-bottom: 1px solid var(--border); }
#contactsTable tbody tr:nth-child(odd) { background: color-mix(in oklab, var(--card), #0000 30%); }
#contactsTable tbody tr:nth-child(even) { background: color-mix(in oklab, var(--card), #0000 15%); }
#contactsTable tbody tr:hover { background: color-mix(in oklab, var(--accent), #0000 85%); }

.log {
  margin-top: 10px; background: color-mix(in oklab, var(--card), #0000 35%); border: 1px solid var(--border);
  border-radius: 10px; padding: 10px; max-height: 220px; overflow:auto; color: color-mix(in oklab, var(--text), #000 8%);
}

footer { max-width:1100px; margin: 10px auto 28px; color: var(--muted); text-align:center; }

/* Status colors (optional) */
.badge-success { background: var(--accent); color:#1b120b; }
.badge-warn { background: var(--warn); color:#3a2315; }
.badge-danger { background: var(--danger); color:#ffe6e1; }

/* Small screens */
@media (max-width: 520px) {
  #api-base { width: 100%; display: grid; grid-template-columns: 1fr auto auto; gap: 8px; }
  #api-base input { width: 100%; }
  .row label { width: 100%; }
}
